Groovy script for CI/CD using pipeline job:
===========================================
in my case i had taken all ec2 instance are ubuntu OS for all environments like DEV && QA && PROD

Pre-Requisites:
===============
Jenkins Server:
++++++++++++++
JAVA
Git
Mavan
Jenkins

QA && Prod Server:
+++++++++++++++++++
JAVA --->make sure the same version which is installed in Jenkins has to installl
Tomcat 
java has to be installed in the 


Note:SSH Agent plugin needs to be installed and configured the credenetials and use the credentials in the code

ubuntu@172.31.16.74--->its my QA Server private address in your case it will be replace with your <username>@<Private IP Address>
ubuntu@172.31.1.183--->its my Prod Server private address in your case it will be replace with your <username>@<Private IP Address>

Code:
======

pipeline {
    agent any

    stages {
        stage('Continuous Download') 
		{
            steps 
			{
                script 
				{
                    // Define the URL of the Git repository you want to clone
                    def gitRepoUrl = 'https://github.com/sunildevops77/maven.git'
                    
                    // Clone the repository into a workspace directory
                    git branch: 'master', url: gitRepoUrl
                }
            }
        }
        stage('Continuous Build') 
		{
            steps 
			{
                script 
				{                    
                    sh 'mvn clean package' // Specify your Maven goals here
                    
				}
            }
        }
		stage('Continuous Deployment') 
		{
			steps 
			{
                sshagent(['ubuntu-tomcat-server-2']) 
				{
					sh 'scp -o StrictHostKeyChecking=no /var/lib/jenkins/workspace/ScriptedPipeline/webapp/target/webapp.war ubuntu@172.31.16.74:/home/ubuntu/apache-tomcat-8.5.91/webapps/qaenv.war'
				}
            }
        }
		stage('Continuous Testing') 
		{
			steps 
			{
                script 
				{                    
                    sh 'echo "Tesing Passed!"'
                    
				}
            }
        }
		stage('Waiting for Approval') 
		{
            steps 
			{
                input 'Waiting for approval in production ?'
            }
        }
		stage('Continuous Delivary') 
		{
			steps 
			{
                sshagent(['ubuntu-tomcat-server-3']) 
				{
					sh 'scp -o StrictHostKeyChecking=no /var/lib/jenkins/workspace/ScriptedPipeline/webapp/target/webapp.war ubuntu@172.31.1.183:/home/ubuntu/apache-tomcat-8.5.91/webapps/qaenv2.war'
				}
            }
        }
    }
}
